(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{240:function(e,n,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(8401)}])},4422:function(e,n,l){"use strict";l.r(n),l.d(n,{default:function(){return v}});var i=l(1527),t=l(7910),r=l(9150),s=l(8794),a=l(3765),o=l(4328),c=l(5586),d=l(5707),u=l(3016),x=l(4352),h=l(7535),m=l(2095),p=l(4231),j=l(7207),g=l(959),f=l(3284);function v(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_,{}),(0,i.jsx)(y,{})]})}let y=()=>{let[e,n]=(0,h.KO)(t.OV),[l,j]=(0,h.KO)(t.H7),v=new Map([["zh.pinyin",["pinyin","拼音"]],["zh.pinyin_display",["pinyin display","拼音表示方式"]],["zh.pinyin_position",["pinyin position","拼音表示位置"]]]),{control:y}=(0,m.cI)({defaultValues:l}),_=(0,m.qo)({control:y});(0,g.useEffect)(()=>{var e,n,i,t,r,s;console.log("specificonfig:",l),console.log("specific useWatchValue:",_),j({...l,zh:{...l.zh,..._,pinyin:null!==(t=null===(e=_.zh)||void 0===e?void 0:e.pinyin)&&void 0!==t?t:l.zh.pinyin,pinyin_display:null!==(r=null===(n=_.zh)||void 0===n?void 0:n.pinyin_display)&&void 0!==r?r:l.zh.pinyin_display,pinyin_position:null!==(s=null===(i=_.zh)||void 0===i?void 0:i.pinyin_position)&&void 0!==s?s:l.zh.pinyin_position}})},[_]);let Z=(0,p.X$)(e.lang)(v),N=e=>function(n){let{name:l}=n;return(0,i.jsx)(m.Qr,{control:y,name:l,render:n=>{let{field:t}=n;return(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(o.Z,{id:l+"label",children:Z(l)}),(0,i.jsx)(c.Z,{...t,id:l,labelId:l+"label",children:e.map(e=>{let[n,l]=e;return(0,i.jsx)(d.Z,{value:n,children:l},n)})})]})}})},b=new Map([["zh.pinyin_display",new Map([["line",["line","線"]],["zi",["with character","字毎"]]])],["zh.pinyin_position",new Map([["above",["above","上"]],["below",["below","下"]]])]]),w=n=>{var l;let{name:t}=n,r=[...null!==(l=b.get(t))&&void 0!==l?l:[]].map(n=>{let[l,i]=n;return[l,(0,f.wf)(l)(i)(p.xi.findIndex(n=>n==e.lang))]}),s=N(r);return(0,i.jsx)(s,{name:t})};return(0,i.jsxs)(u.Z,{component:"form",className:"specifiConfig",children:[(0,i.jsx)(x.Z,{children:(0,i.jsx)(function(e){let{name:n}=e;return(0,i.jsx)(m.Qr,{control:y,name:n,render:e=>{let{field:t}=e;return(0,i.jsx)(r.Z,{...t,control:(0,i.jsx)(s.Z,{checked:l.zh.pinyin}),label:Z(n)})}})},{name:"zh.pinyin"})}),(0,i.jsx)(w,{name:"zh.pinyin_display"}),(0,i.jsx)(w,{name:"zh.pinyin_position"})]})},_=()=>{let[e,n]=(0,h.KO)(t.OV),{getValues:l,control:f,watch:v}=(0,m.cI)({defaultValues:{lang:e.lang,multiline:e.result.multiline}}),y=(0,m.qo)({control:f});(0,g.useEffect)(()=>{var l,i;console.log("config form value",y),n({...e,lang:null!==(l=y.lang)&&void 0!==l?l:t.XQ.lang,result:{multiline:null!==(i=y.multiline)&&void 0!==i?i:t.XQ.result.multiline}})},[y]);let _=e=>"lang"==e?["UI language","表示言語"]:[e];return(0,i.jsxs)(u.Z,{component:"form",className:"appConfig",children:[(0,i.jsx)(m.Qr,{control:f,name:"lang",render:n=>{let{field:l}=n;return(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(o.Z,{id:"config.lang",children:(0,p.lB)(e.lang)(_("lang"))}),(0,i.jsx)(c.Z,{...l,labelId:"config.lang",value:e.lang,children:p.xi.map(e=>(0,i.jsx)(d.Z,{value:e,children:j.Z.getNativeName(e)},e))})]})}}),(0,i.jsx)(x.Z,{children:(0,i.jsx)(m.Qr,{control:f,name:"multiline",render:e=>{let{field:n}=e;return(0,i.jsx)(r.Z,{...n,control:(0,i.jsx)(s.Z,{}),label:"multiline"})}})})]})}},3394:function(e,n,l){"use strict";l.r(n);var i=l(1527);let t=()=>(0,i.jsx)("h1",{children:"History"});n.default=t},8401:function(e,n,l){"use strict";l.r(n),l.d(n,{default:function(){return c}});var i=l(1527),t=l(4103),r=l.n(t),s=l(4422),a=l(3983),o=l(3394);function c(){return(0,i.jsxs)("main",{className:r().main,children:[(0,i.jsx)(s.default,{}),(0,i.jsx)(a.default,{}),(0,i.jsx)(o.default,{})]})}},3983:function(e,n,l){"use strict";l.r(n),l.d(n,{default:function(){return N}});var i=l(1527),t=l(959),r=l(4328),s=l(3765),a=l(4736),o=l(3016),c=l(5586),d=l(5707),u=l(8045),x=l(1606),h=l(2095),m=l(7910),p=l(2243),j=l(4231),g=l(7535),f=l(7207);l(8669);var v=l(3284),y=l(6817),_=l.n(y),Z=l(835);function N(){return(0,i.jsxs)("div",{className:"translate-main",children:[(0,i.jsx)(b,{}),(0,i.jsx)(w,{})]})}let b=()=>{let{getValues:e,formState:{isValid:n,errors:l},control:p,handleSubmit:y}=(0,h.cI)({defaultValues:m.T0}),[Z]=(0,g.KO)(m.OV),N=(0,j.XF)(Z.lang),[b,w]=(0,g.KO)(m.UI),[z,O]=t.useState([]),[K]=(0,g.KO)(m.Id),[I]=(0,g.KO)(m.Bg),V=m.vY,E=(0,m.bJ)(V),F=e=>{let{target:{value:n}}=e;O("string"==typeof n?n.split(","):n)},Q=e=>{let n={...e,to:(0,v.HR)(e=>e.length>0)(m.T0.to)(z)};console.log("translateMulti:",n),w(n)},M=n=>{"Enter"===n.key&&(n.ctrlKey||n.metaKey)&&(console.log("key down cmd + Enter"),Q(e()))};return(0,i.jsxs)(o.Z,{component:"form",onSubmit:y(Q),className:"input-window",children:[(0,i.jsx)(h.Qr,{control:p,name:"from",render:e=>{let{field:n}=e;return(0,i.jsxs)(s.Z,{sx:{minWidth:110},children:[(0,i.jsx)(r.Z,{id:"source-select-label",children:N("form.select.from.label")}),(0,i.jsxs)(c.Z,{...n,id:"source-select",labelId:"source-select-label",onKeyDown:M,children:[(0,i.jsx)(d.Z,{value:"",children:"auto"},"auto"),K.map(e=>(f.Z.getName(e),(0,i.jsx)(d.Z,{value:e,children:E(e)(Z.lang)},e)))]})]})}}),(0,i.jsx)(h.Qr,{control:p,name:"text",rules:{required:N("controller.required"),maxLength:{message:N("form length limit"),value:Z.form.limit}},render:e=>{let{field:n,formState:t}=e;return(0,i.jsx)(u.Z,{...n,multiline:!0,sx:{width:"50%"},fullWidth:!0,className:_().textinput+" textfield",onKeyDown:M,label:N("input-label"),error:!!l.text,helperText:l.text&&l.text.message||!t.isValid&&"umm... invalid"})}}),(0,i.jsx)(h.Qr,{control:p,name:"to",render:e=>{let{field:n}=e;return(0,i.jsxs)(s.Z,{sx:{minWidth:"7em",maxWidth:"260px"},children:[(0,i.jsx)(r.Z,{id:"target-label",children:N("target.lang.label")}),(0,i.jsx)(c.Z,{...n,labelId:"target-label",id:"target-select",multiple:!0,value:z,defaultValue:m.T0.to,onChange:F,onKeyDown:M,renderValue:e=>(0,i.jsx)(o.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,i.jsx)(a.Z,{label:e},e))}),children:K.map(e=>(0,i.jsx)(d.Z,{value:e,children:E(e)(Z.lang)},e))})]})}}),(0,i.jsx)(x.Z,{type:"submit",disabled:!n,children:N("translate")})]})},w=()=>{let[e,n]=(0,g.KO)(m.UI),[l,r]=t.useState(new Map),[s]=(0,g.KO)(m.OV),[a]=(0,g.KO)(m.Bg),[o]=(0,g.KO)(m.Id),[c]=(0,g.KO)(m.H7);console.log("transAtom",e),console.log("translations",l);let d=m.vY;return t.useEffect(()=>{if(0===e.text.length)return;let n=performance.now();e.to.filter(e=>o.includes(e)).forEach((n,i)=>{Promise.all((0,p.RM)(e)(n)).then(e=>{console.log("translateIntoArray return",e),l.set(n,(0,v.aL)(e)),r(new Map([...l]))})});let i=performance.now();console.log("performance time",i-n)},[e]),0===e.text.length?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)("div",{className:"output-window",children:[(0,i.jsx)("h1",{children:"output"}),(0,i.jsx)("div",{className:_().resultbox,children:Array.from(e.to).map(e=>{var n;let t=d(e)(s.lang)+" (".concat(e,")");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:_().targetLang,children:t}),(0,i.jsx)("div",{className:"units",children:(0,i.jsx)(z,{lang:e,text:null!==(n=l.get(e))&&void 0!==n?n:"loading..."})})]})})})]})},z=e=>{let{text:n,lang:l}=e,[t]=(0,g.KO)(m.H7),[r]=(0,g.KO)(m.OV),s=e=>{let{line:n}=e;return(0,i.jsx)("div",{className:"unit",children:O(t)(l,n)})};return r.result.multiline?(0,i.jsx)(i.Fragment,{children:n.split("\n").map((e,n)=>(0,i.jsx)(s,{line:e},n))}):(0,i.jsx)(s,{line:n})},O=e=>function(e,n){let[l]=(0,g.KO)(m.H7);return["zh","zh-CN","zh-TW"].includes(e)&&l.zh.pinyin?"line"==l.zh.pinyin_display?(0,i.jsx)(i.Fragment,{children:"below"==l.zh.pinyin_position?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"line",children:n}),(0,i.jsx)("div",{className:"pinyin",children:(0,Z.N9)(n,{nonZh:"consecutive"})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"pinyin",children:(0,Z.N9)(n,{nonZh:"consecutive"})}),(0,i.jsx)("div",{className:"line",children:n})]})}):(0,i.jsx)("div",{className:_().flex,children:(0,v.$R)(n.trim(),(0,Z.N9)(n.trim(),{nonZh:"consecutive",type:"array"})).map(e=>{let[n,t]=e;return(0,i.jsx)("div",{className:"ziyin",children:"below"==l.zh.pinyin_position?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"hanzi",children:n}),(0,i.jsx)("div",{className:"pinyin",children:t})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"pinyin",children:t}),(0,i.jsx)("div",{className:"hanzi",children:n})]})},n)})}):(0,i.jsx)(i.Fragment,{children:n})}},4103:function(){},6817:function(e){e.exports={targetLang:"translate_targetLang__q2s3l",textinput:"translate_textinput___UaVP",flex:"translate_flex__U_T86",resultbox:"translate_resultbox__5YQlD"}}},function(e){e.O(0,[399,479,177,927,231,774,888,179],function(){return e(e.s=240)}),_N_E=e.O()}]);