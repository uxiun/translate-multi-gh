(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[575],{1334:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/translate",function(){return t(3983)}])},3983:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return b}});var l=t(1527),r=t(959),s=t(4328),a=t(3765),i=t(4736),c=t(3016),o=t(5586),d=t(5707),u=t(8045),x=t(1606),m=t(2095),h=t(7910),j=t(2243),g=t(4231),p=t(7535),f=t(7207);t(8669);var v=t(3284),_=t(6817),N=t.n(_),y=t(835);function b(){return(0,l.jsxs)("div",{className:"translate-main",children:[(0,l.jsx)(w,{}),(0,l.jsx)(Z,{})]})}let w=()=>{let{getValues:e,formState:{isValid:n,errors:t},control:j,handleSubmit:_}=(0,m.cI)({defaultValues:h.T0}),[y]=(0,p.KO)(h.OV),b=(0,g.XF)(y.lang),[w,Z]=(0,p.KO)(h.UI),[K,O]=r.useState([]),[z]=(0,p.KO)(h.Id),[F]=(0,p.KO)(h.Bg),E=h.vY,I=(0,h.bJ)(E),T=e=>{let{target:{value:n}}=e;O("string"==typeof n?n.split(","):n)},V=e=>{let n={...e,to:(0,v.HR)(e=>e.length>0)(h.T0.to)(K)};console.log("translateMulti:",n),Z(n)},k=n=>{"Enter"===n.key&&(n.ctrlKey||n.metaKey)&&(console.log("key down cmd + Enter"),V(e()))};return(0,l.jsxs)(c.Z,{component:"form",onSubmit:_(V),className:"input-window",children:[(0,l.jsx)(m.Qr,{control:j,name:"from",render:e=>{let{field:n}=e;return(0,l.jsxs)(a.Z,{sx:{minWidth:110},children:[(0,l.jsx)(s.Z,{id:"source-select-label",children:b("form.select.from.label")}),(0,l.jsxs)(o.Z,{...n,id:"source-select",labelId:"source-select-label",onKeyDown:k,children:[(0,l.jsx)(d.Z,{value:"",children:"auto"},"auto"),z.map(e=>(f.Z.getName(e),(0,l.jsx)(d.Z,{value:e,children:I(e)(y.lang)},e)))]})]})}}),(0,l.jsx)(m.Qr,{control:j,name:"text",rules:{required:b("controller.required"),maxLength:{message:b("form length limit"),value:y.form.limit}},render:e=>{let{field:n,formState:r}=e;return(0,l.jsx)(u.Z,{...n,multiline:!0,sx:{width:"50%"},fullWidth:!0,className:N().textinput+" textfield",onKeyDown:k,label:b("input-label"),error:!!t.text,helperText:t.text&&t.text.message||!r.isValid&&"umm... invalid"})}}),(0,l.jsx)(m.Qr,{control:j,name:"to",render:e=>{let{field:n}=e;return(0,l.jsxs)(a.Z,{sx:{minWidth:"7em",maxWidth:"260px"},children:[(0,l.jsx)(s.Z,{id:"target-label",children:b("target.lang.label")}),(0,l.jsx)(o.Z,{...n,labelId:"target-label",id:"target-select",multiple:!0,value:K,defaultValue:h.T0.to,onChange:T,onKeyDown:k,renderValue:e=>(0,l.jsx)(c.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,l.jsx)(i.Z,{label:e},e))}),children:z.map(e=>(0,l.jsx)(d.Z,{value:e,children:I(e)(y.lang)},e))})]})}}),(0,l.jsx)(x.Z,{type:"submit",disabled:!n,children:b("translate")})]})},Z=()=>{let[e,n]=(0,p.KO)(h.UI),[t,s]=r.useState(new Map),[a]=(0,p.KO)(h.OV),[i]=(0,p.KO)(h.Bg),[c]=(0,p.KO)(h.Id),[o]=(0,p.KO)(h.H7);console.log("transAtom",e),console.log("translations",t);let d=h.vY;return r.useEffect(()=>{if(0===e.text.length)return;let n=performance.now();e.to.filter(e=>c.includes(e)).forEach((n,l)=>{Promise.all((0,j.RM)(e)(n)).then(e=>{console.log("translateIntoArray return",e),t.set(n,(0,v.aL)(e)),s(new Map([...t]))})});let l=performance.now();console.log("performance time",l-n)},[e]),0===e.text.length?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)("div",{className:"output-window",children:[(0,l.jsx)("h1",{children:"output"}),(0,l.jsx)("div",{className:N().resultbox,children:Array.from(e.to).map(e=>{var n;let r=d(e)(a.lang)+" (".concat(e,")");return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:N().targetLang,children:r}),(0,l.jsx)("div",{className:"units",children:(0,l.jsx)(K,{lang:e,text:null!==(n=t.get(e))&&void 0!==n?n:"loading..."})})]})})})]})},K=e=>{let{text:n,lang:t}=e,[r]=(0,p.KO)(h.H7),[s]=(0,p.KO)(h.OV),a=e=>{let{line:n}=e;return(0,l.jsx)("div",{className:"unit",children:O(r)(t,n)})};return s.result.multiline?(0,l.jsx)(l.Fragment,{children:n.split("\n").map((e,n)=>(0,l.jsx)(a,{line:e},n))}):(0,l.jsx)(a,{line:n})},O=e=>function(e,n){let[t]=(0,p.KO)(h.H7);return["zh","zh-CN","zh-TW"].includes(e)&&t.zh.pinyin?"line"==t.zh.pinyin_display?(0,l.jsx)(l.Fragment,{children:"below"==t.zh.pinyin_position?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"line",children:n}),(0,l.jsx)("div",{className:"pinyin",children:(0,y.N9)(n,{nonZh:"consecutive"})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"pinyin",children:(0,y.N9)(n,{nonZh:"consecutive"})}),(0,l.jsx)("div",{className:"line",children:n})]})}):(0,l.jsx)("div",{className:N().flex,children:(0,v.$R)(n.trim(),(0,y.N9)(n.trim(),{nonZh:"consecutive",type:"array"})).map(e=>{let[n,r]=e;return(0,l.jsx)("div",{className:"ziyin",children:"below"==t.zh.pinyin_position?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"hanzi",children:n}),(0,l.jsx)("div",{className:"pinyin",children:r})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"pinyin",children:r}),(0,l.jsx)("div",{className:"hanzi",children:n})]})},n)})}):(0,l.jsx)(l.Fragment,{children:n})}},6817:function(e){e.exports={targetLang:"translate_targetLang__q2s3l",textinput:"translate_textinput___UaVP",flex:"translate_flex__U_T86",resultbox:"translate_resultbox__5YQlD"}}},function(e){e.O(0,[399,479,177,231,774,888,179],function(){return e(e.s=1334)}),_N_E=e.O()}]);