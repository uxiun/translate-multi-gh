(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76],{5437:function(e,n,l){"use strict";l.r(n);var t=l(1527),r=l(7910),i=l(3284),a=l(835),s=l(4781),d=l(8669),o=l(7535);let c=e=>{let{text:n}=e,[l]=(0,o.KO)(r.H7);return(0,t.jsx)(t.Fragment,{children:(0,i.dY)(n).map(e=>{let[n,r]=e;return(0,t.jsx)("div",{className:"ziyin",children:"below"==l.zh.pinyin_position?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"hanzi",children:n}),(0,t.jsx)("div",{className:"pinyin",children:r})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pinyin",children:r}),(0,t.jsx)("div",{className:"hanzi",children:n})]})},n)})})},m=e=>{var n;let{text:l}=e,[m]=(0,o.KO)(r.H7),{data:x,error:u,isLoading:h}=(0,s.ZP)("/api/chinese/"+l,d.Z);if(u)return console.error(u),(0,t.jsx)(t.Fragment,{children:"load failed"});if(h)return m.zh.pinyin?"line"==m.zh.pinyin_display?(0,t.jsx)(t.Fragment,{children:"below"==m.zh.pinyin_position?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"line",children:l}),(0,t.jsx)("div",{className:"pinyin",children:(0,a.N9)(l,{nonZh:"consecutive"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pinyin",children:(0,a.N9)(l,{nonZh:"consecutive"})}),(0,t.jsx)("div",{className:"line",children:l})]})}):(0,t.jsx)("div",{className:"flex",children:(0,t.jsx)(c,{text:l})}):(0,t.jsx)(t.Fragment,{children:l});console.log("data",x);let{py:g,han:p}=null!==(n=null==x?void 0:x.pairs.reduce((e,n)=>{let[l,t]=n;return{py:[...e.py,t],han:[...e.han,l]}},{py:[],han:[]}))&&void 0!==n?n:{py:[],han:[]},j=(0,i._M)(" ")(p),f=(0,i._M)(" ")(g);console.log("hanSegmented",j),console.log("pinyinSegmented",f);let v=m.zh.segment?j:l;return m.zh.pinyin?"line"==m.zh.pinyin_display?(0,t.jsx)(t.Fragment,{children:"below"==m.zh.pinyin_position?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"line",children:v}),(0,t.jsx)("div",{className:"pinyin",children:f})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pinyin",children:f}),(0,t.jsx)("div",{className:"line",children:v})]})}):(0,t.jsx)("div",{className:"flex",children:m.zh.segment?(0,t.jsx)(t.Fragment,{children:null==x?void 0:x.pairs.map(e=>{let[n,l]=e;return(0,t.jsx)("div",{className:"ziyin",children:"below"==m.zh.pinyin_position?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"hanzi",children:n}),(0,t.jsx)("div",{className:"pinyin",children:l})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pinyin",children:l}),(0,t.jsx)("div",{className:"hanzi",children:n})]})},n)})}):(0,t.jsx)(c,{text:l})}):(0,t.jsx)(t.Fragment,{children:v})};n.default=m},1235:function(e,n,l){"use strict";l.r(n);var t=l(1527),r=l(7910),i=l(7535),a=l(5437);let s=e=>{let{text:n,lang:l}=e,[a]=(0,i.KO)(r.OV),s=e=>{let{line:n}=e;return(0,t.jsx)("div",{className:"unit",children:(0,t.jsx)(d,{lang:l,line:n})})};return a.result.multiline?(0,t.jsx)(t.Fragment,{children:n.split("\n").map((e,n)=>(0,t.jsx)(s,{line:e},n))}):(0,t.jsx)(s,{line:n})},d=e=>{let{lang:n,line:l}=e,[s]=(0,i.KO)(r.H7);return["zh","zh-CN","zh-TW"].includes(n)?(0,t.jsx)(a.default,{text:l}):(0,t.jsx)(t.Fragment,{children:l})};n.default=s},5076:function(e,n,l){"use strict";l.r(n),l.d(n,{default:function(){return K}});var t=l(1527),r=l(959),i=l(4328),a=l(3765),s=l(4736),d=l(3016),o=l(5586),c=l(5707),m=l(8045),x=l(1606),u=l(2095),h=l(7910),g=l(2243),p=l(4231),j=l(7535),f=l(7207);l(8669);var v=l(3284),y=l(6817),N=l.n(y),w=l(1235);let b={dropdown:{maxHeight:"max(50vh, 200px)",maxWidth:"80vw"}},F={PaperProps:{sx:{maxHeight:b.dropdown.maxHeight,maxWidth:b.dropdown.maxWidth}}};function K(){return(0,t.jsxs)("div",{className:"translate-main",children:[(0,t.jsx)(z,{}),(0,t.jsx)(O,{})]})}let z=()=>{let{getValues:e,formState:{isValid:n,errors:l},control:g,handleSubmit:y}=(0,u.cI)({defaultValues:h.T0}),w=(0,u.qo)({control:g}),[b]=(0,j.KO)(h.OV),K=(0,p.XF)(b.lang),[z,O]=(0,j.KO)(h.UI),[P,_]=r.useState([]),[H]=(0,j.KO)(h.Id),[I]=(0,j.KO)(h.Bg),M=h.vY,S=(0,h.bJ)(M),W=e=>{let{target:{value:n}}=e;_("string"==typeof n?n.split(","):n)},E=e=>{let n={...e,to:(0,v.HR)(e=>e.length>0)(h.T0.to)(P)};console.log("translateMulti:",n),O(n)},V=n=>{"Enter"===n.key&&(n.ctrlKey||n.metaKey)&&(console.log("key down cmd + Enter"),E(e()))};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.Z,{component:"form",onSubmit:y(E),className:"input-window",children:[(0,t.jsx)(u.Qr,{control:g,name:"from",render:e=>{let{field:n}=e;return(0,t.jsxs)(a.Z,{sx:{minWidth:110},children:[(0,t.jsx)(i.Z,{id:"source-select-label",children:K("form.select.from.label")}),(0,t.jsxs)(o.Z,{...n,id:"source-select",labelId:"source-select-label",onKeyDown:V,MenuProps:{PaperProps:F.PaperProps},children:[(0,t.jsx)(c.Z,{value:"",children:"auto"},"auto"),H.map(e=>(f.Z.getName(e),(0,t.jsx)(c.Z,{value:e,sx:{whiteSpace:"normal"},children:S(e)(b.lang)},e)))]})]})}}),(0,t.jsx)(u.Qr,{control:g,name:"text",rules:{required:K("controller.required"),maxLength:{message:K("form length limit"),value:b.form.limit}},render:e=>{let{field:n,formState:r}=e;return(0,t.jsx)(m.Z,{...n,multiline:!0,sx:{width:"50%"},fullWidth:!0,className:N().textinput+" textfield",onKeyDown:V,label:K("input-label"),error:!!l.text,helperText:l.text&&l.text.message||!r.isValid&&"umm... invalid"})}}),(0,t.jsx)(u.Qr,{control:g,name:"to",render:e=>{let{field:n}=e;return(0,t.jsxs)(a.Z,{sx:{minWidth:"7em",maxWidth:"260px"},children:[(0,t.jsx)(i.Z,{id:"target-label",children:K("target.lang.label")}),(0,t.jsx)(o.Z,{...n,labelId:"target-label",id:"target-select",multiple:!0,value:P,defaultValue:h.T0.to,onChange:W,onKeyDown:V,MenuProps:{PaperProps:F.PaperProps},renderValue:e=>(0,t.jsx)(d.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,t.jsx)(s.Z,{label:e},e))}),children:H.map(e=>(0,t.jsx)(c.Z,{value:e,sx:{whiteSpace:"normal"},children:S(e)(b.lang)},e))})]})}}),(0,t.jsx)(x.Z,{type:"submit",disabled:!n,children:K("translate")})]}),(0,t.jsx)(Z,{form:w})]})},Z=e=>{var n;let{form:l}=e,[i,a]=r.useState(!0);return(0,t.jsx)(t.Fragment,{children:i?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"src text",children:null!==(n=l.text)&&void 0!==n?n:""})}):(0,t.jsx)(t.Fragment,{})})},O=()=>{let[e,n]=(0,j.KO)(h.qQ),[l,i]=(0,j.KO)(h.UI),[a,s]=r.useState(new Map),[d]=(0,j.KO)(h.OV),[o]=(0,j.KO)(h.Bg),[c]=(0,j.KO)(h.Id),[m]=(0,j.KO)(h.H7),[x,u]=(0,j.KO)(h.EE);console.log("transAtom",l),console.log("translations",a);let f=h.vY;return r.useEffect(()=>{if(0===l.text.length)return;let e=performance.now();l.to.filter(e=>c.includes(e)).forEach((e,n)=>{Promise.all((0,g.RM)(l)(e)).then(n=>{console.log("translateIntoArray return",n),s(l=>(l.set(e,(0,v.aL)(n)),new Map([...l]))),u(t=>{var r,i;return t.set(l.text,{srclang:0==l.from.length?void 0:l.from,trans:new Map([...null!==(i=null===(r=t.get(l.text))||void 0===r?void 0:r.trans)&&void 0!==i?i:[],[e,(0,v.aL)(n)]])}),new Map([...t])})})});let n=performance.now();console.log("performance time",n-e)},[l,c,u]),0===l.text.length?(0,t.jsx)(t.Fragment,{}):(0,t.jsxs)("div",{className:"output-window",children:[(0,t.jsx)("h1",{children:(0,p.XF)(d.lang)("output")}),(0,t.jsx)("div",{className:N().resultbox+" resultbox",children:Array.from(l.to).map(e=>{var n;let l=f(e)(d.lang)+" (".concat(e,")");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:N().targetLang+" targetLang",children:l}),(0,t.jsx)("div",{className:"units",children:(0,t.jsx)(w.default,{lang:e,text:null!==(n=a.get(e))&&void 0!==n?n:"loading..."})})]})})})]})}},4231:function(e,n,l){"use strict";l.d(n,{X$:function(){return o},XF:function(){return s},lB:function(){return d},xi:function(){return i}});var t=l(7910),r=l(3284);let i=["en","ja"],a={"input-label":["text to translate","翻訳対象"],"controller.required":["type something","入力してください"],"target.lang.label":["target language","目標言語"],"form.select.multi.required":["select at least one language","最低一つは言語を選択してください"],"form.select.from.label":["source language","原始言語（翻訳元）"],"form length limit":["within ".concat(t.XQ.form.limit," characters"),"".concat(t.XQ.form.limit,"字以内に収めてください")],translate:["translate","翻訳"],output:["Result","結果"],history:["History","履歴"]},s=e=>n=>{var l;return(0,r.wH)(i.findIndex(n=>n==e))(e=>e>=0)(e=>null!==(l=a[n].at(e))&&void 0!==l?l:"undefined")(e=>"language not found")},d=e=>n=>(0,r.wH)(i.findIndex(n=>n==e))(e=>e>=0)(e=>(0,r.wf)("")(n)(e))(e=>""),o=e=>n=>l=>{var t;return(0,r.wf)("no translation")(null!==(t=n.get(l))&&void 0!==t?t:[])(i.findIndex(n=>n==e))}},6817:function(){}}]);